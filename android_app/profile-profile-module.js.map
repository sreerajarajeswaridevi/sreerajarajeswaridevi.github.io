{"version":3,"sources":["./src/app/profile/components/main-profile/main-profile.component.html","./src/app/profile/components/profile-user/profile-user.component.html","./src/app/profile/containers/profile.component.html","./src/app/profile/components/main-profile/main-profile.component.scss","./src/app/profile/components/main-profile/main-profile.component.ts","./src/app/profile/components/profile-user/profile-user.component.scss","./src/app/profile/components/profile-user/profile-user.component.ts","./src/app/profile/containers/profile.component.scss","./src/app/profile/containers/profile.component.ts","./src/app/profile/profile-routing.module.ts","./src/app/profile/profile.module.ts"],"names":[],"mappings":"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","file":"profile-profile-module.js","sourcesContent":["export default \"<mdb-card>\\n  <mdb-card-body>\\n    <h3 class=\\\"h2-responsive mb-4\\\">\\n      <strong>Profile data</strong>\\n    </h3>\\n\\n    <!--Body-->\\n    <!-- <form [formGroup]=\\\"updateProfileForm\\\"> -->\\n      <table>\\n        <tbody>\\n      <tr>\\n        <td>\\n          <h5 class=\\\"h5-responsive mr-4 grey-text\\\">User Name</h5>\\n        </td>\\n        <td>\\n        <blockquote class=\\\"blockquote bq-success\\\">{{ user.username }}</blockquote>\\n      </td>\\n      </tr>\\n      <tr>\\n        <td>\\n          <h5 class=\\\"h5-responsive mr-4 grey-text\\\">Email</h5>\\n        </td>\\n  \\n        <td>\\n          <blockquote class=\\\"blockquote bq-success\\\">{{ user.email }}</blockquote>\\n        </td>\\n        \\n      </tr>\\n      <tr>\\n        <td>\\n          <h5 class=\\\"h5-responsive mr-4 grey-text\\\">Role</h5>\\n        </td>\\n        <td>\\n          <blockquote class=\\\"blockquote bq-success\\\">{{ user.role }}</blockquote>\\n        </td>\\n          \\n      </tr>\\n      <tr>\\n        <td>\\n          <h5 class=\\\"h5-responsive mr-4 grey-text\\\">Temple</h5>\\n        </td>\\n        <td>\\n          <blockquote class=\\\"blockquote bq-success\\\">{{ user.temple_name }}<small class=\\\"ml-2\\\">({{user.temple_code}})</small></blockquote>\\n        </td>\\n          \\n      </tr>\\n    </tbody>\\n    </table>\\n      <!-- <div class=\\\"text-right\\\">\\n        <button type=\\\"button\\\" mdbBtn color=\\\"primary\\\" (click)=\\\"onProfileUpdate()\\\">Update profile</button>\\n      </div> -->\\n    <!-- </form> -->\\n  </mdb-card-body>\\n</mdb-card>\\n\"","export default \"<mdb-card>\\n  <mdb-card-body>\\n    <div class=\\\"text-center\\\">\\n      <div class=\\\"avatar\\\" style=\\\"margin-top: -60px\\\">\\n          <img *ngIf=\\\"user.photoUrl\\\" src=\\\"{{ user.photoUrl }}\\\" height=\\\"96\\\" width=\\\"96\\\" class=\\\"rounded-circle z-depth-0\\\" alt=\\\"avatar image\\\">\\n      </div>\\n\\n      <h3 *ngIf=\\\"user.displayName\\\" class=\\\"mt-4\\\">{{ user.displayName }}</h3>\\n      <h3 *ngIf=\\\"!user.displayName\\\" class=\\\"mt-4\\\">Anonymous user</h3>\\n\\n      <a mdbBtn class=\\\"mt-3\\\" color=\\\"primary\\\" (click)=\\\"onLogout()\\\">\\n        <i class=\\\"fa fa-sign-out\\\"></i>\\n        Logout\\n      </a>\\n    </div>\\n  </mdb-card-body>\\n</mdb-card>\\n\"","export default \"<div class=\\\"white px-4 py-2\\\">\\n  <blockquote class=\\\"text-left  blockquote bq-success\\\">\\n    <h3 class=\\\"header\\\">Settings</h3>\\n    <p class=\\\"py-0\\\" *ngIf=\\\"user.role === 'manager'\\\">Change your pooja and profile settings here</p>\\n  </blockquote>\\n</div>\\n\\n<ng-container *ngIf=\\\"user.role === 'manager'\\\">\\n  <app-pooja-list></app-pooja-list>\\n  \\n  <div class=\\\"white px-4 py-2\\\" >\\n    <blockquote class=\\\"text-left  blockquote bq-success\\\">\\n      <h3 class=\\\"header\\\">Add or remove Users</h3>\\n    </blockquote>\\n    <app-users-list [users]=\\\"users$ | async\\\" (addUser)=\\\"openAddUserModal($event)\\\"\\n    (deleteUser)=\\\"onDeleteUser($event)\\\"></app-users-list>\\n  </div>\\n\\n</ng-container>\\n\\n<div class=\\\"container py-5\\\">\\n  <div class=\\\"row mx-auto py-5\\\">\\n    <div class=\\\"col-md-4 mt-3\\\">\\n      <app-profile-user [user]=\\\"user$ | async\\\" (logout)=\\\"logoutUser($event)\\\"></app-profile-user>\\n    </div>\\n    <div class=\\\"col-md-8 mt-3\\\">\\n      <app-main-profile [user]=\\\"user$ | async\\\" (profileUpdate)=\\\"updateProfile($event)\\\"></app-main-profile>\\n    </div>\\n  </div>\\n</div>\"","export default \"blockquote {\\n  word-break: break-all;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL3N0b3JlL2NvZGUvQXVkaXQtVUktQW5ndWxhci9zcmMvYXBwL3Byb2ZpbGUvY29tcG9uZW50cy9tYWluLXByb2ZpbGUvbWFpbi1wcm9maWxlLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wcm9maWxlL2NvbXBvbmVudHMvbWFpbi1wcm9maWxlL21haW4tcHJvZmlsZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wcm9maWxlL2NvbXBvbmVudHMvbWFpbi1wcm9maWxlL21haW4tcHJvZmlsZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImJsb2NrcXVvdGUge1xuICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbn0iLCJibG9ja3F1b3RlIHtcbiAgd29yZC1icmVhazogYnJlYWstYWxsO1xufSJdfQ== */\"","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\nimport { User } from '../../../auth/models/user.model';\nimport { FormGroup, FormControl } from '@angular/forms';\n\n@Component({\n  selector: 'app-main-profile',\n  templateUrl: './main-profile.component.html',\n  styleUrls: ['./main-profile.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MainProfileComponent implements OnInit {\n  @Input() user: User;\n  @Output() profileUpdate = new EventEmitter<any>();\n\n  updateProfileForm: FormGroup;\n\n  constructor() { }\n\n  ngOnInit() {\n    this.updateProfileForm = new FormGroup({\n      displayName: new FormControl(this.user.displayName),\n      photoUrl: new FormControl(this.user.photoUrl)\n    });\n  }\n\n  onProfileUpdate() {\n    this.profileUpdate.emit(this.updateProfileForm.value);\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Byb2ZpbGUvY29tcG9uZW50cy9wcm9maWxlLXVzZXIvcHJvZmlsZS11c2VyLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\nimport { User } from '../../../auth/models/user.model';\n\n@Component({\n  selector: 'app-profile-user',\n  templateUrl: './profile-user.component.html',\n  styleUrls: ['./profile-user.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ProfileUserComponent implements OnInit {\n  @Input() user: User;\n  @Output() logout = new EventEmitter<any>();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  onLogout() {\n    this.logout.emit(this.user);\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Byb2ZpbGUvY29udGFpbmVycy9wcm9maWxlLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { User } from '../../auth/models/user.model';\nimport { select, Store } from '@ngrx/store';\nimport { AppState } from '../../reducers/index';\nimport { getUser } from '../../auth/store/auth.selectors';\nimport * as fromAuth from './../../auth/store/auth.actions';\nimport { getUsersList } from 'src/app/admin/store/admin.selectors';\nimport { delay, map, take } from 'rxjs/operators';\nimport * as fromAdmin from '../../admin/store/admin.actions';\nimport { ConfirmModalComponent } from 'src/app/shared/components/confirm-modal/confirm-modal.component';\nimport { MDBModalRef, MDBModalService } from 'angular-bootstrap-md';\nimport { UserModalComponent } from 'src/app/shared/components/user-modal/user-modal.component';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.scss']\n})\nexport class ProfileComponent implements OnInit {\n  user$: Observable<User | null>;\n  public user: User;\n  users$: Observable<any>;\n  usersListLoading$: Observable<boolean>;\n  private modalRef: MDBModalRef;\n\n  modalConfig = {\n    class: 'modal-dialog-centered'\n  };\n\n  constructor(private store: Store<AppState>,\n    private modalService: MDBModalService\n    ) { \n    this.store.select(getUser).subscribe((user: User) => {\n      this.user = user;\n    })\n  }\n\n  ngOnInit() {\n    this.user$ = this.store.select(getUser);\n    this.users$ = this.store.pipe(\n      select(getUsersList),\n      delay(0),\n      map((users: User[]) => {\n        if (!users || (users && users.length === 0)) {\n          this.store.dispatch(new fromAdmin.GetUsersList());\n        }\n        return users;\n      })\n    );\n  }\n\n  updateProfile(userData: any) {\n    this.store.dispatch(new fromAuth.UpdateProfile(userData));\n  }\n\n  logoutUser(user: User) {\n    this.store.dispatch(new fromAuth.LogoutRequested({ user }));\n  }\n\n  \n  openAddUserModal() {\n    this.modalRef = this.modalService.show(\n      UserModalComponent,\n      {...this.modalConfig,\n      data: {\n        heading: 'Add User',\n        templeList: [{\n          temple_name: this.user.temple_name,\n          temple_code: this.user.temple_code\n        }]\n      }}\n    );\n\n    this.modalRef.content.userData\n      .pipe(take(1))\n      .subscribe((user: User) => {\n        if (user) {\n          this.store.dispatch(\n            new fromAdmin.AddUser({\n              user\n            })\n          );\n        }\n      });\n  }\n\n  openUserDeleteConfirmModal(user: User) {\n    this.modalRef = this.modalService.show(\n      ConfirmModalComponent,\n      this.modalConfig\n    );\n\n    this.modalRef.content.confirmation\n      .pipe(take(1))\n      .subscribe((confirmation: boolean) => {\n        if (confirmation) {\n          this.store.dispatch(\n            new fromAdmin.DeleteUser({ user })\n          );\n        }\n      });\n  }\n\n  onDeleteUser(user: User) {\n    this.openUserDeleteConfirmModal(user);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ProfileComponent } from './containers/profile.component';\n\nconst routes: Routes = [\n  { path: '', component: ProfileComponent }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule]\n})\nexport class ProfileRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CardsModule, ButtonsModule, InputsModule } from 'angular-bootstrap-md';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { ProfileComponent } from './containers/profile.component';\nimport { ProfileRoutingModule } from './profile-routing.module';\nimport { MainProfileComponent } from './components/main-profile/main-profile.component';\nimport { ProfileUserComponent } from './components/profile-user/profile-user.component';\nimport { PoojasModule } from '../poojas/poojas.module';\nimport { SharedModule } from '../shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ProfileRoutingModule,\n    CardsModule,\n    ButtonsModule,\n    InputsModule,\n    ReactiveFormsModule,\n    FormsModule,\n    PoojasModule,\n    SharedModule\n  ],\n  declarations: [ProfileComponent, MainProfileComponent, ProfileUserComponent],\n  exports: [ProfileComponent]\n})\nexport class ProfileModule { }\n"],"sourceRoot":"webpack:///"}